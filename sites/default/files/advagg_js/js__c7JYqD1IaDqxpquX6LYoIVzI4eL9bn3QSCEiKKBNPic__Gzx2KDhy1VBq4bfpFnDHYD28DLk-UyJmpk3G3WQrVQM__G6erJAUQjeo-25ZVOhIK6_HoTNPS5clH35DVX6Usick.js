/* Source and licensing information for the line(s) below can be found at http://abitu.net/sites/all/modules/contrib/devel/devel_krumo_path.js. */
(function($){Drupal.behaviors.devel={attach:function(context,settings){$('.krumo-footnote .krumo-call').once().before('<img style="vertical-align: middle;" title="Click to expand. Double-click to show path." src="'+settings.basePath+'misc/help.png"/>');var krumo_name=[];var krumo_type=[];function krumo_traverse(el){krumo_name.push($(el).html());krumo_type.push($(el).siblings('em').html().match(/\w*/)[0]);if($(el).closest('.krumo-nest').length>0){krumo_traverse($(el).closest('.krumo-nest').prev().find('.krumo-name'));}}
$('.krumo-child > div:first-child',context).dblclick(function(e){if($(this).find('> .krumo-php-path').length>0){$(this).find('> .krumo-php-path').remove();}
else{krumo_traverse($(this).find('> a.krumo-name'));var krumo_path_string='';for(var i=krumo_name.length-1;i>=0;--i){if((krumo_name.length-1)==i)
krumo_path_string+='$'+krumo_name[i];if(typeof krumo_name[(i-1)]!=='undefined'){if(krumo_type[i]=='Array'){krumo_path_string+="[";if(!/^\d*$/.test(krumo_name[(i-1)]))
krumo_path_string+="'";krumo_path_string+=krumo_name[(i-1)];if(!/^\d*$/.test(krumo_name[(i-1)]))
krumo_path_string+="'";krumo_path_string+="]";}
if(krumo_type[i]=='Object')
krumo_path_string+='->'+krumo_name[(i-1)];}}
$(this).append('<div class="krumo-php-path" style="font-family: Courier, monospace; font-weight: bold;">'+krumo_path_string+'</div>');krumo_name=[];krumo_type=[];}});}};})(jQuery);;;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/sites/all/modules/contrib/devel/devel_krumo_path.js. */
/* Source and licensing information for the line(s) below can be found at http://abitu.net/misc/progress.js. */
(function($){Drupal.progressBar=function(id,updateCallback,method,errorCallback){var pb=this;this.id=id;this.method=method||'GET';this.updateCallback=updateCallback;this.errorCallback=errorCallback;this.element=$('<div class="progress" aria-live="polite"></div>').attr('id',id);this.element.html('<div class="bar"><div class="filled"></div></div>'+'<div class="percentage"></div>'+'<div class="message">&nbsp;</div>');};Drupal.progressBar.prototype.setProgress=function(percentage,message){if(percentage>=0&&percentage<=100){$('div.filled',this.element).css('width',percentage+'%');$('div.percentage',this.element).html(percentage+'%');}
$('div.message',this.element).html(message);if(this.updateCallback){this.updateCallback(percentage,message,this);}};Drupal.progressBar.prototype.startMonitoring=function(uri,delay){this.delay=delay;this.uri=uri;this.sendPing();};Drupal.progressBar.prototype.stopMonitoring=function(){clearTimeout(this.timer);this.uri=null;};Drupal.progressBar.prototype.sendPing=function(){if(this.timer){clearTimeout(this.timer);}
if(this.uri){var pb=this;$.ajax({type:this.method,url:this.uri,data:'',dataType:'json',success:function(progress){if(progress.status==0){pb.displayError(progress.data);return;}
pb.setProgress(progress.percentage,progress.message);pb.timer=setTimeout(function(){pb.sendPing();},pb.delay);},error:function(xmlhttp){pb.displayError(Drupal.ajaxError(xmlhttp,pb.uri));}});}};Drupal.progressBar.prototype.displayError=function(string){var error=$('<div class="messages error"></div>').html(string);$(this.element).before(error).hide();if(this.errorCallback){this.errorCallback(this);}};})(jQuery);;;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/misc/progress.js. */
/* Source and licensing information for the line(s) below can be found at http://abitu.net/sites/all/modules/contrib/ctools/js/modal.js. */
(function($){Drupal.CTools=Drupal.CTools||{};Drupal.CTools.Modal=Drupal.CTools.Modal||{};Drupal.CTools.Modal.show=function(choice){var opts={};if(choice&&typeof choice=='string'&&Drupal.settings[choice]){$.extend(true,opts,Drupal.settings[choice]);}
else if(choice){$.extend(true,opts,choice);}
var defaults={modalTheme:'CToolsModalDialog',throbberTheme:'CToolsModalThrobber',animation:'show',animationSpeed:'fast',modalSize:{type:'scale',width:.8,height:.8,addWidth:0,addHeight:0,contentRight:25,contentBottom:45},modalOptions:{opacity:.55,background:'#fff'}};var settings={};$.extend(true,settings,defaults,Drupal.settings.CToolsModal,opts);if(Drupal.CTools.Modal.currentSettings&&Drupal.CTools.Modal.currentSettings!=settings){Drupal.CTools.Modal.modal.remove();Drupal.CTools.Modal.modal=null;}
Drupal.CTools.Modal.currentSettings=settings;var resize=function(e){var context=e?document:Drupal.CTools.Modal.modal;if(Drupal.CTools.Modal.currentSettings.modalSize.type=='scale'){var width=$(window).width()*Drupal.CTools.Modal.currentSettings.modalSize.width;var height=$(window).height()*Drupal.CTools.Modal.currentSettings.modalSize.height;}
else{var width=Drupal.CTools.Modal.currentSettings.modalSize.width;var height=Drupal.CTools.Modal.currentSettings.modalSize.height;}
$('div.ctools-modal-content',context).css({'width':width+Drupal.CTools.Modal.currentSettings.modalSize.addWidth+'px','height':height+Drupal.CTools.Modal.currentSettings.modalSize.addHeight+'px'});$('div.ctools-modal-content .modal-content',context).css({'width':(width-Drupal.CTools.Modal.currentSettings.modalSize.contentRight)+'px','height':(height-Drupal.CTools.Modal.currentSettings.modalSize.contentBottom)+'px'});}
if(!Drupal.CTools.Modal.modal){Drupal.CTools.Modal.modal=$(Drupal.theme(settings.modalTheme));if(settings.modalSize.type=='scale'){$(window).bind('resize',resize);}}
resize();$('span.modal-title',Drupal.CTools.Modal.modal).html(Drupal.CTools.Modal.currentSettings.loadingText);Drupal.CTools.Modal.modalContent(Drupal.CTools.Modal.modal,settings.modalOptions,settings.animation,settings.animationSpeed);$('#modalContent .modal-content').html(Drupal.theme(settings.throbberTheme));$('#modalContent .modal-content').delegate('input.form-autocomplete','keyup',function(){$('#autocomplete').css('top',$(this).position().top+$(this).outerHeight()+$(this).offsetParent().filter('#modal-content').scrollTop());});};Drupal.CTools.Modal.dismiss=function(){if(Drupal.CTools.Modal.modal){Drupal.CTools.Modal.unmodalContent(Drupal.CTools.Modal.modal);}};Drupal.theme.prototype.CToolsModalDialog=function(){var html=''
html+='  <div id="ctools-modal">'
html+='    <div class="ctools-modal-content">'
html+='      <div class="modal-header">';html+='        <a class="close" href="#">';html+=Drupal.CTools.Modal.currentSettings.closeText+Drupal.CTools.Modal.currentSettings.closeImage;html+='        </a>';html+='        <span id="modal-title" class="modal-title">&nbsp;</span>';html+='      </div>';html+='      <div id="modal-content" class="modal-content">';html+='      </div>';html+='    </div>';html+='  </div>';return html;}
Drupal.theme.prototype.CToolsModalThrobber=function(){var html='';html+='  <div id="modal-throbber">';html+='    <div class="modal-throbber-wrapper">';html+=Drupal.CTools.Modal.currentSettings.throbber;html+='    </div>';html+='  </div>';return html;};Drupal.CTools.Modal.getSettings=function(object){var match=$(object).attr('class').match(/ctools-modal-(\S+)/);if(match){return match[1];}}
Drupal.CTools.Modal.clickAjaxCacheLink=function(){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));return Drupal.CTools.AJAX.clickAJAXCacheLink.apply(this);};Drupal.CTools.Modal.clickAjaxLink=function(){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(this));return false;};Drupal.CTools.Modal.submitAjaxForm=function(e){var $form=$(this);var url=$form.attr('action');setTimeout(function(){Drupal.CTools.AJAX.ajaxSubmit($form,url);},1);return false;}
Drupal.behaviors.ZZCToolsModal={attach:function(context){$('area.ctools-use-modal, a.ctools-use-modal',context).once('ctools-use-modal',function(){var $this=$(this);$this.click(Drupal.CTools.Modal.clickAjaxLink);var element_settings={};if($this.attr('href')){element_settings.url=$this.attr('href');element_settings.event='click';element_settings.progress={type:'throbber'};}
var base=$this.attr('href');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings);});$('input.ctools-use-modal, button.ctools-use-modal',context).once('ctools-use-modal',function(){var $this=$(this);$this.click(Drupal.CTools.Modal.clickAjaxLink);var button=this;var element_settings={};element_settings.url=Drupal.CTools.Modal.findURL(this);if(element_settings.url==''){element_settings.url=$(this).closest('form').attr('action');}
element_settings.event='click';element_settings.setClick=true;var base=$this.attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings);$('.'+$(button).attr('id')+'-url').change(function(){Drupal.ajax[base].options.url=Drupal.CTools.Modal.findURL(button);});});$('#modal-content form',context).once('ctools-use-modal',function(){var $this=$(this);var element_settings={};element_settings.url=$this.attr('action');element_settings.event='submit';element_settings.progress={'type':'throbber'}
var base=$this.attr('id');Drupal.ajax[base]=new Drupal.ajax(base,this,element_settings);Drupal.ajax[base].form=$this;$('input[type=submit], button',this).click(function(event){Drupal.ajax[base].element=this;this.form.clk=this;if(Drupal.autocompleteSubmit&&!Drupal.autocompleteSubmit()){return false;}
if(event.bubbles==undefined){$(this.form).trigger('submit');return false;}});});$('.ctools-close-modal',context).once('ctools-close-modal').click(function(){Drupal.CTools.Modal.dismiss();return false;});}};Drupal.CTools.Modal.modal_display=function(ajax,response,status){if($('#modalContent').length==0){Drupal.CTools.Modal.show(Drupal.CTools.Modal.getSettings(ajax.element));}
$('#modal-title').html(response.title);$('#modal-content').html(response.output).scrollTop(0);var settings=response.settings||ajax.settings||Drupal.settings;Drupal.attachBehaviors('#modalContent',settings);}
Drupal.CTools.Modal.modal_dismiss=function(command){Drupal.CTools.Modal.dismiss();$('link.ctools-temporary-css').remove();}
Drupal.CTools.Modal.modal_loading=function(command){Drupal.CTools.Modal.modal_display({output:Drupal.theme(Drupal.CTools.Modal.currentSettings.throbberTheme),title:Drupal.CTools.Modal.currentSettings.loadingText});}
Drupal.CTools.Modal.findURL=function(item){var url='';var url_class='.'+$(item).attr('id')+'-url';$(url_class).each(function(){var $this=$(this);if(url&&$this.val()){url+='/';}
url+=$this.val();});return url;};Drupal.CTools.Modal.modalContent=function(content,css,animation,speed){if(!animation){animation='show';}
else{if(animation!='fadeIn'&&animation!='slideDown'){animation='show';}}
if(!speed){speed='fast';}
css=jQuery.extend({position:'absolute',left:'0px',margin:'0px',background:'#000',opacity:'.55'},css);css.filter='alpha(opacity='+(100*css.opacity)+')';content.hide();if($('#modalBackdrop').length)$('#modalBackdrop').remove();if($('#modalContent').length)$('#modalContent').remove();if(self.pageYOffset){var wt=self.pageYOffset;}else if(document.documentElement&&document.documentElement.scrollTop){var wt=document.documentElement.scrollTop;}else if(document.body){var wt=document.body.scrollTop;}
var docHeight=$(document).height()+50;var docWidth=$(document).width();var winHeight=$(window).height();var winWidth=$(window).width();if(docHeight<winHeight)docHeight=winHeight;$('body').append('<div id="modalBackdrop" style="z-index: 1000; display: none;"></div><div id="modalContent" style="z-index: 1001; position: absolute;">'+$(content).html()+'</div>');modalEventHandler=function(event){target=null;if(event){target=event.target;}else{event=window.event;target=event.srcElement;}
var parents=$(target).parents().get();for(var i=0;i<parents.length;++i){var position=$(parents[i]).css('position');if(position=='absolute'||position=='fixed'){return true;}}
if($(target).is('#modalContent, body')||$(target).filter('*:visible').parents('#modalContent').length){return true;}
else{$('#modalContent').focus();}
event.preventDefault();};$('body').bind('focus',modalEventHandler);$('body').bind('keypress',modalEventHandler);var modalContent=$('#modalContent').css('top','-1000px');var mdcTop=wt+(winHeight / 2)-(modalContent.outerHeight()/ 2);var mdcLeft=(winWidth / 2)-(modalContent.outerWidth()/ 2);$('#modalBackdrop').css(css).css('top',0).css('height',docHeight+'px').css('width',docWidth+'px').show();modalContent.css({top:mdcTop+'px',left:mdcLeft+'px'}).hide()[animation](speed);modalContentClose=function(){close();return false;};$('.close').bind('click',modalContentClose);modalEventEscapeCloseHandler=function(event){if(event.keyCode==27){close();return false;}};$(document).bind('keydown',modalEventEscapeCloseHandler);function close(){$(window).unbind('resize',modalContentResize);$('body').unbind('focus',modalEventHandler);$('body').unbind('keypress',modalEventHandler);$('.close').unbind('click',modalContentClose);$('body').unbind('keypress',modalEventEscapeCloseHandler);$(document).trigger('CToolsDetachBehaviors',$('#modalContent'));if(animation=='fadeIn')animation='fadeOut';if(animation=='slideDown')animation='slideUp';if(animation=='show')animation='hide';modalContent.hide()[animation](speed);$('#modalContent').remove();$('#modalBackdrop').remove();};modalContentResize=function(){if(self.pageYOffset){var wt=self.pageYOffset;}else if(document.documentElement&&document.documentElement.scrollTop){var wt=document.documentElement.scrollTop;}else if(document.body){var wt=document.body.scrollTop;}
var docHeight=$(document).height();var docWidth=$(document).width();var winHeight=$(window).height();var winWidth=$(window).width();if(docHeight<winHeight)docHeight=winHeight;var modalContent=$('#modalContent');var mdcTop=wt+(winHeight / 2)-(modalContent.outerHeight()/ 2);var mdcLeft=(winWidth / 2)-(modalContent.outerWidth()/ 2);$('#modalBackdrop').css('height',docHeight+'px').css('width',docWidth+'px').show();modalContent.css('top',mdcTop+'px').css('left',mdcLeft+'px').show();};$(window).bind('resize',modalContentResize);$('#modalContent').focus();};Drupal.CTools.Modal.unmodalContent=function(content,animation,speed)
{if(!animation){var animation='show';}else{if((animation!='fadeOut')&&(animation!='slideUp'))animation='show';}
if(!speed)var speed='fast';$(window).unbind('resize',modalContentResize);$('body').unbind('focus',modalEventHandler);$('body').unbind('keypress',modalEventHandler);$('.close').unbind('click',modalContentClose);$(document).trigger('CToolsDetachBehaviors',$('#modalContent'));content.each(function(){if(animation=='fade'){$('#modalContent').fadeOut(speed,function(){$('#modalBackdrop').fadeOut(speed,function(){$(this).remove();});$(this).remove();});}else{if(animation=='slide'){$('#modalContent').slideUp(speed,function(){$('#modalBackdrop').slideUp(speed,function(){$(this).remove();});$(this).remove();});}else{$('#modalContent').remove();$('#modalBackdrop').remove();}}});};$(function(){Drupal.ajax.prototype.commands.modal_display=Drupal.CTools.Modal.modal_display;Drupal.ajax.prototype.commands.modal_dismiss=Drupal.CTools.Modal.modal_dismiss;});})(jQuery);;;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/sites/all/modules/contrib/ctools/js/modal.js. */
/* Source and licensing information for the line(s) below can be found at http://abitu.net/sites/all/modules/contrib/panels/panels_ipe/js/panels_ipe.js. */
(function($){Drupal.settings.Panels=Drupal.settings.Panels||{};Drupal.settings.Panels.RegionLock={10:{'top':false,'left':true,'middle':true}}
Drupal.PanelsIPE={editors:{},bindClickDelete:function(context){$('a.pane-delete:not(.pane-delete-processed)',context).addClass('pane-delete-processed').click(function(){if(confirm(Drupal.t('Remove this pane?'))){$(this).parents('div.panels-ipe-portlet-wrapper').fadeOut('medium',function(){var $sortable=$(this).closest('.ui-sortable');$(this).empty().remove();$sortable.trigger('sortremove');});$(this).parents('div.panels-ipe-display-container').addClass('changed');}
return false;});}}
Drupal.behaviors.PanelsIPE={attach:function(context){for(var i in Drupal.settings.PanelsIPECacheKeys){var key=Drupal.settings.PanelsIPECacheKeys[i];$('div#panels-ipe-display-'+key+':not(.panels-ipe-processed)').addClass('panels-ipe-processed').each(function(){if(Drupal.PanelsIPE.editors[key]){Drupal.PanelsIPE.editors[key].editing=false;}
Drupal.PanelsIPE.editors[key]=new DrupalPanelsIPE(key);Drupal.PanelsIPE.editors[key].showContainer();});}
$('.panels-ipe-hide-bar').once('panels-ipe-hide-bar-processed').click(function(){Drupal.PanelsIPE.editors[key].hideContainer();});Drupal.PanelsIPE.bindClickDelete(context);}};function DrupalPanelsIPE(cache_key,cfg){cfg=cfg||{};var ipe=this;this.key=cache_key;this.lockPath=null;this.state={};this.container=$('#panels-ipe-control-container');this.control=$('div#panels-ipe-control-'+cache_key);this.initButton=$('div.panels-ipe-startedit',this.control);this.cfg=cfg;this.changed=false;this.sortableOptions=$.extend({opacity:0.75,items:'div.panels-ipe-portlet-wrapper',handle:'div.panels-ipe-draghandle',cancel:'.panels-ipe-nodrag',dropOnEmpty:true},cfg.sortableOptions||{});this.regions=[];this.sortables={};$(document).bind('CToolsDetachBehaviors',function(){if(!$('.panels-ipe-form-container',ipe.control).html()&&!ipe.container.is(':visible')){ipe.showContainer();ipe.cancelLock();}
if(ipe.topParent&&ipe.topParent.hasClass('panels-ipe-editing')&&ipe.container.is(':not(visible)')){ipe.showContainer();}});$(window).bind('beforeunload',function(){if(!ipe.editing){return;}
if(ipe.topParent&&ipe.topParent.hasClass('changed')){ipe.changed=true;}
if(ipe.changed){return Drupal.t('This will discard all unsaved changes. Are you sure?');}});$(window).bind('unload',function(){ipe.cancelLock(true);});this.cancelLock=function(sync){if(ipe.lockPath&&Drupal.ajax['panels-ipe-customize-page']){var ajaxOptions={type:'POST',url:ipe.lockPath}
if(sync){ajaxOptions.async=false;}
ipe.lockPath=null;$.ajax(ajaxOptions);}}
this.activateSortable=function(event,ui){if(!Drupal.settings.Panels||!Drupal.settings.Panels.RegionLock){return;}
var region=event.data.region;var paneId=ui.item.attr('id').replace('panels-ipe-paneid-','');var disabledRegions=false;if(!Drupal.settings.Panels.RegionLock[paneId]||Drupal.settings.Panels.RegionLock[paneId][region]){ipe.sortables[region].sortable('enable');ipe.sortables[region].sortable('refresh');}
else{disabledRegions=true;ipe.sortables[region].sortable('disable');ipe.sortables[region].sortable('refresh');}
if(disabledRegions){$(event.srcElement).bind('dragstop',function(event,ui){});}};this.enableRegions=function(event,ui){for(var i in ipe.regions){ipe.sortables[ipe.regions[i]].sortable('enable');ipe.sortables[ipe.regions[i]].sortable('refresh');}}
this.initSorting=function(){var $region=$(this).parents('.panels-ipe-region');var region=$region.attr('id').replace('panels-ipe-regionid-','');ipe.sortables[region]=$(this).sortable(ipe.sortableOptions);ipe.regions.push(region);$(this).bind('sortactivate',{region:region},ipe.activateSortable);};this.initEditing=function(formdata){ipe.editing=true;ipe.topParent=$('div#panels-ipe-display-'+cache_key);ipe.backup=this.topParent.clone();ipe.changed=false;$('div.panels-ipe-sort-container',ipe.topParent).each(ipe.initSorting);$('div.panels-ipe-sort-container',ipe.topParent).sortable('option','connectWith',['div.panels-ipe-sort-container']);$('div.panels-ipe-sort-container',ipe.topParent).bind('sortupdate',function(){ipe.changed=true;});$('div.panels-ipe-sort-container',ipe.topParent).bind('sortstop',this.enableRegions);$('.panels-ipe-form-container',ipe.control).append(formdata);$('input:submit:not(.ajax-processed), button:not(.ajax-processed)',ipe.control).addClass('ajax-processed').each(function(){var element_settings={};element_settings.url=$(this.form).attr('action');element_settings.setClick=true;element_settings.event='click';element_settings.progress={'type':'throbber'};element_settings.ipe_cache_key=cache_key;var base=$(this).attr('id');Drupal.ajax[ipe.base]=new Drupal.ajax(base,this,element_settings);});$('.panels-ipe-on').show();ipe.showForm();ipe.topParent.addClass('panels-ipe-editing');};this.hideContainer=function(){ipe.container.slideUp('fast');};this.showContainer=function(){ipe.container.slideDown('normal');};this.showButtons=function(){$('.panels-ipe-form-container').hide();$('.panels-ipe-button-container').show();ipe.showContainer();};this.showForm=function(){$('.panels-ipe-button-container').hide();$('.panels-ipe-form-container').show();ipe.showContainer();};this.endEditing=function(){ipe.editing=false;ipe.lockPath=null;$('.panels-ipe-form-container').empty();$('div.panels-ipe-off').show('fast');ipe.showButtons();$('div.panels-ipe-on').hide();$('.panels-ipe-editing').removeClass('panels-ipe-editing');$('div.panels-ipe-sort-container.ui-sortable',ipe.topParent).sortable("destroy");};this.saveEditing=function(){$('div.panels-ipe-region',ipe.topParent).each(function(){var val='';var region=$(this).attr('id').split('panels-ipe-regionid-')[1];$(this).find('div.panels-ipe-portlet-wrapper').each(function(){var id=$(this).attr('id').split('panels-ipe-paneid-')[1];if(id){if(val){val+=',';}
val+=id;}});$('[name="panel[pane]['+region+']"]',ipe.control).val(val);});}
this.cancelIPE=function(){ipe.hideContainer();ipe.topParent.fadeOut('medium',function(){ipe.topParent.replaceWith(ipe.backup.clone());ipe.topParent=$('div#panels-ipe-display-'+ipe.key);$('.ctools-use-modal-processed',ipe.topParent).removeClass('ctools-use-modal-processed');$('.pane-delete-processed',ipe.topParent).removeClass('pane-delete-processed');ipe.topParent.fadeIn('medium');Drupal.attachBehaviors();});};this.cancelEditing=function(){if(ipe.topParent.hasClass('changed')){ipe.changed=true;}
if(!ipe.changed||confirm(Drupal.t('This will discard all unsaved changes. Are you sure?'))){this.cancelIPE();return true;}
else{return false;}};this.createSortContainers=function(){$('div.panels-ipe-region',this.topParent).each(function(){$(this).children('div.panels-ipe-portlet-marker').parent().wrapInner('<div class="panels-ipe-sort-container" />');$('div.panels-ipe-portlet-static',this).each(function(){$(this).prependTo($(this).parent().parent());});});}
this.createSortContainers();};$(function(){Drupal.ajax.prototype.commands.initIPE=function(ajax,data,status){if(Drupal.PanelsIPE.editors[data.key]){Drupal.PanelsIPE.editors[data.key].initEditing(data.data);Drupal.PanelsIPE.editors[data.key].lockPath=data.lockPath;}
Drupal.attachBehaviors();};Drupal.ajax.prototype.commands.IPEsetLockState=function(ajax,data,status){if(Drupal.PanelsIPE.editors[data.key]){Drupal.PanelsIPE.editors[data.key].lockPath=data.lockPath;}};Drupal.ajax.prototype.commands.addNewPane=function(ajax,data,status){if(Drupal.PanelsIPE.editors[data.key]){Drupal.PanelsIPE.editors[data.key].changed=true;}};Drupal.ajax.prototype.commands.cancelIPE=function(ajax,data,status){if(Drupal.PanelsIPE.editors[data.key]){Drupal.PanelsIPE.editors[data.key].cancelIPE();Drupal.PanelsIPE.editors[data.key].endEditing();}};Drupal.ajax.prototype.commands.unlockIPE=function(ajax,data,status){if(confirm(data.message)){var ajaxOptions=ajax.options;ajaxOptions.url=data.break_path;$.ajax(ajaxOptions);}
else{Drupal.PanelsIPE.editors[data.key].endEditing();}};Drupal.ajax.prototype.commands.endIPE=function(ajax,data,status){if(Drupal.PanelsIPE.editors[data.key]){Drupal.PanelsIPE.editors[data.key].endEditing();}};Drupal.ajax.prototype.commands.insertNewPane=function(ajax,data,status){IPEContainerSelector='#panels-ipe-regionid-'+data.regionId+' div.panels-ipe-sort-container';firstPaneSelector=IPEContainerSelector+' div.panels-ipe-portlet-wrapper:first';if($(firstPaneSelector).length){insertData={'method':'before','selector':firstPaneSelector,'data':data.renderedPane,'settings':null}
Drupal.ajax.prototype.commands.insert(ajax,insertData,status);}
else{insertData={'method':'prepend','selector':IPEContainerSelector,'data':data.renderedPane,'settings':null}
Drupal.ajax.prototype.commands.insert(ajax,insertData,status);}};Drupal.ajax.prototype.ipeReplacedEventResponse=Drupal.ajax.prototype.eventResponse;Drupal.ajax.prototype.eventResponse=function(element,event){if(element.ipeCancelThis){element.ipeCancelThis=null;return false;}
if($(this.element).attr('id')=='panels-ipe-cancel'){if(!Drupal.PanelsIPE.editors[this.element_settings.ipe_cache_key].cancelEditing()){return false;}}
var retval=this.ipeReplacedEventResponse(element,event);if(this.ajaxing&&this.element_settings.ipe_cache_key){if(this.progress.element){$(this.progress.element).addClass('ipe-throbber').appendTo($('body'));}
Drupal.PanelsIPE.editors[this.element_settings.ipe_cache_key].hideContainer();}
return retval;};Drupal.ajax.prototype.ipeReplacedError=Drupal.ajax.prototype.error;Drupal.ajax.prototype.error=function(response,uri){var retval=this.ipeReplacedError(response,uri);if(this.element_settings.ipe_cache_key){Drupal.PanelsIPE.editors[this.element_settings.ipe_cache_key].showContainer();}};Drupal.ajax.prototype.ipeReplacedBeforeSerialize=Drupal.ajax.prototype.beforeSerialize;Drupal.ajax.prototype.beforeSerialize=function(element_settings,options){if($(this.element).hasClass('panels-ipe-save')){Drupal.PanelsIPE.editors[this.element_settings.ipe_cache_key].saveEditing();};return this.ipeReplacedBeforeSerialize(element_settings,options);};});Drupal.behaviors.panelsIpeMarginBottom={attach:function(){$('body:not(.panels-ipe)').addClass('panels-ipe');}};})(jQuery);;;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/sites/all/modules/contrib/panels/panels_ipe/js/panels_ipe.js. */
