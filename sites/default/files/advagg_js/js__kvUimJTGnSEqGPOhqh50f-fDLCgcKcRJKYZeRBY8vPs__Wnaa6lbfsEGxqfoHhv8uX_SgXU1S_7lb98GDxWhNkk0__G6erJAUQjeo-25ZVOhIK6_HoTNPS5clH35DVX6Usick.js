/* Source and licensing information for the line(s) below can be found at http://abitu.net/sites/all/libraries/autopager/jquery.autopager-1.0.0.js. */
(function($){var window=this,options={},content,currentUrl,nextUrl,active=false,defaults={autoLoad:true,page:1,content:'.content',link:'a[rel=next]',insertBefore:null,appendTo:null,start:function(){},load:function(){},disabled:false};$.autopager=function(_options){var autopager=this.autopager;if(typeof _options==='string'&&$.isFunction(autopager[_options])){var args=Array.prototype.slice.call(arguments,1),value=autopager[_options].apply(autopager,args);return value===autopager||value===undefined?this:value;}
_options=$.extend({},defaults,_options);autopager.option(_options);content=$(_options.content).filter(':last');if(content.length){if(!_options.insertBefore&&!_options.appendTo){var insertBefore=content.next();if(insertBefore.length){set('insertBefore',insertBefore);}else{set('appendTo',content.parent());}}}
setUrl();return this;};$.extend($.autopager,{option:function(key,value){var _options=key;if(typeof key==="string"){if(value===undefined){return options[key];}
_options={};_options[key]=value;}
$.each(_options,function(key,value){set(key,value);});return this;},enable:function(){set('disabled',false);return this;},disable:function(){set('disabled',true);return this;},destroy:function(){this.autoLoad(false);options={};content=currentUrl=nextUrl=undefined;return this;},autoLoad:function(value){return this.option('autoLoad',value);},load:function(){if(active||!nextUrl||options.disabled){return;}
active=true;options.start(currentHash(),nextHash());$.get(nextUrl,insertContent);return this;}});function set(key,value){switch(key){case'autoLoad':if(value&&!options.autoLoad){$(window).scroll(loadOnScroll);}else if(!value&&options.autoLoad){$(window).unbind('scroll',loadOnScroll);}
break;case'insertBefore':if(value){options.appendTo=null;}
break
case'appendTo':if(value){options.insertBefore=null;}
break}
options[key]=value;}
function setUrl(context){currentUrl=nextUrl||window.location.href;nextUrl=$(options.link,context).attr('href');}
function loadOnScroll(){if(content.offset().top+content.height()<$(document).scrollTop()+$(window).height()){$.autopager.load();}}
function insertContent(res){var _options=options,nextPage=$('<div/>').append(res.replace(/<script(.|\s)*?\/script>/g,"")),nextContent=nextPage.find(_options.content);set('page',_options.page+1);setUrl(nextPage);if(nextContent.length){if(_options.insertBefore){nextContent.insertBefore(_options.insertBefore);}else{nextContent.appendTo(_options.appendTo);}
_options.load.call(nextContent.get(),currentHash(),nextHash());content=nextContent.filter(':last');}
active=false;}
function currentHash(){return{page:options.page,url:currentUrl};}
function nextHash(){return{page:options.page+1,url:nextUrl};}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/sites/all/libraries/autopager/jquery.autopager-1.0.0.js. */
/* Source and licensing information for the line(s) below can be found at http://abitu.net/sites/all/modules/contrib/gd_infinite_scroll/js/gd_infinite_scroll.js. */
(function($){var gd_infinite_scroll_was_initialised=false;Drupal.behaviors.gd_infinite_scroll={attach:function(){if($.autopager){if(!gd_infinite_scroll_was_initialised){gd_infinite_scroll_was_initialised=true;var settings=Drupal.settings.gd_infinite_scroll;var content_selector=settings.content_selector;var items_selector=settings.content_selector+' '+settings.items_selector;var pager_selector=settings.pager_selector;var next_selector=settings.next_selector;var img_location=settings.content_selector;var img_path=settings.img_path;var load_more=settings.load_more;var load_more_markup=settings.load_more_markup;var img='<div id="gd_infinite_scroll-ajax-loader"><img src="'+img_path+'" alt="loading..."/></div>';if(!$(content_selector)[0]){return;}
var autoloading=true;var load_more_button=$('<a></a>');if(load_more){autoloading=false;load_more_button=$(load_more_markup);}
$(pager_selector).hide();var handle=$.autopager({autoLoad:autoloading,appendTo:content_selector,content:items_selector,link:next_selector,page:0,start:function(){$(img_location).after(img);},load:function(current,next){$('div#gd_infinite_scroll-ajax-loader').remove();Drupal.attachBehaviors(this);if(load_more&&!next.url){load_more_button.hide();}}});if(!load_more){var prev_content_height=$(content_selector).height();do{var last=$(items_selector).filter(':last');if(last.offset().top+last.height()<$(document).scrollTop()+$(window).height()){last=$(items_selector).filter(':last');handle.autopager('load');}
else{break;}}
while($(content_selector).height()>prev_content_height);}
else if($(next_selector)[0]){load_more_button.addClass('gd-infinite-scroll-load-more').appendTo($(img_location).parent()).click(function(e){handle.autopager('load');e.preventDefault();});}}}
else{alert(Drupal.t('Autopager jquery plugin in not loaded.'));}}}})(jQuery);;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/sites/all/modules/contrib/gd_infinite_scroll/js/gd_infinite_scroll.js. */
/* Source and licensing information for the line(s) below can be found at http://abitu.net/sites/all/themes/abitu/js/global.js. */
jQuery(document).ajaxStart(function(){jQuery('.ajaxloader').css({display:'block'});});jQuery(document).ajaxStop(function(){jQuery('.ajaxloader').css({display:'none'});jQuery('#block-hogar-a-su-medida-plano-maestro a[href^="#"]').on('click',function(e){e.preventDefault();});});(function($){$(document).ready(function(){$('.flexslider.flexslider-home').flexslider({animation:"fade",animationLoop:true,pauseOnHover:false,controlsContainer:".container-nav",directionNav:false});var hasBeenClicked=false;var target=window.location.hash;$(window).load(function(){if(target!=''){$(target+"_").click();}});$(window).on('hashchange',function(e){e.preventDefault();if(!hasBeenClicked){target=window.location.hash;if(target==''){target="#plano";}
$(target+"_").click();}
hasBeenClicked=false;});$(".tipovistas").on('click',function(){$('.imagen_punto').css({display:'none'});$('#puntos li a').removeClass('active');var id=$(this).data('id');var url=$(this).data('href');var vistagrande=$('#tab-content'+id+' .field-name-field-imagen-primer-plano img');$('#tab-content'+id+' .field-name-field-imagen-primer-plano').addClass('animated fadeIn');$(vistagrande).attr('src',url);$('#tab-content'+id+' .imagen_segundo_plano').removeClass('active');$('#tab-content'+id+' .imagen_segundo_plano.disabled').addClass('active').removeClass('disabled').addClass('animated fadeIn');$(this).parents('.imagen_segundo_plano').addClass('disabled');});$('#block-hogar-a-su-medida-plano-maestro a[href^="#"]').on('click',function(e){e.preventDefault();var hsh=this.hash;window.location.hash=hsh;});$(document).mouseup(function(e)
{var container=$(".imagen_punto");if(!container.is(e.target)&&container.has(e.target).length===0)
{container.hide();$('#puntos li a').removeClass('active');}});$('.apunto').on('click',function(e){e.preventDefault();$('.apunto').removeClass('active');$(this).addClass('active');var id=$(this).attr('id');$(".content_"+id).addClass("animated fadeIn");$('.imagen_punto').css({display:'none'});$('.content_'+id).css({display:'block'});});var height_screen=screen.height;var height_screen_mid=(height_screen*0.38);$("#chat").css("top",height_screen_mid);var clic_e=false;$(".edificio a").on("click",function(e){e.preventDefault();clic_e=true;var url=$(this).attr("build-edit-path");var num_edificio=$(this).attr("num_dificio");$.ajax({url:url,}).done(function(data){var pisos="";for(var i=data.length-1;i>=0;i--){pisos=pisos+"<div class=\"piso\" id=\"piso"+(i+1)+"\"><a num_dificio=\""+num_edificio+"\" href=\"#\" numb-floor=\""+data[i].nid+"\" floor=\""+(i+1)+"\" >"+data[i].nombre+"</a></div>";};$("#lista_pisos").addClass("edificio-"+num_edificio);$("#lista_pisos").html(pisos);$("#tab-pisos a").trigger("click");});});$(document).on("click","#lista_pisos .piso a",function(){var nid_piso=$(this).attr("numb-floor");var piso=$(this).attr("floor");var num_edificio=$(this).attr("num_dificio");$.ajax({url:'piso/'+nid_piso,}).done(function(data){var apartamentos="";if(num_edificio==1){var e='var i = 0; i < data.length; i++';}else if(num_edificio==2){var e='var i = data.length - 1; i >= 0; i--';}
for(var i=0;i<data.length;i++){var estado="";var solicitar_cita="";switch(data[i].estado){case'3':estado="Disponible";solicitar_cita="<a href=\"contactenos\" class=\"solicitar-cita\">solicitar <br>cita</a>";break;case'2':estado="Ocupado";break;case'1':estado="Vendido";break;}
var type_apartment;if(data[i].name=="A"){type_apartment="type-a";}else if(data[i].name=="B"){type_apartment="type-b";}else if(data[i].name=="C"){type_apartment="type-c";}
apartamentos=apartamentos+"<div class=\"apartamento estado-"+data[i].estado+"\" id=\"apartamento"+(i+1)+"\"><a class=\"openinfo\" href=\"#\">"+num_edificio+"-"+piso+""+0+""+(data[i].numero)+data[i].name+"</a><div class=\"info-piso\"><a class=\"closeinfo\" href=\"javascript:void(0);\">X</a><h4>APARTAMENTO "+piso+""+0+""+(data[i].numero)+data[i].name+"</h4><div class=\"estado\">"+estado+"</div><div class=\"habitaciones\">habitaciones "+data[i].habitaciones+"</div><!--<div class=\"precio\">precio: $"+data[i].precio+"</div>--><div class=\"enlaces\"><a href=\"#\" class=\"detalle\" type-apartment=\""+type_apartment+"\">+ DETALLE</a>"+solicitar_cita+"</div><div class=\"flecha\"></div></div></div>";};$("#apartamentos").attr("class","");$("#apartamentos").addClass("edificio-"+num_edificio);$("#apartamentos").html(apartamentos);$("#tab-content2-1").removeClass("active");$("#tab-content2-2").addClass("active");});});$(document).on("click",".tabs-list .tab a",function(){var content_target=$(this).attr("content-target");if(clic_e==false&&content_target==2){$("#plano_").trigger("click");alert('Seleccione primero un edificio');return false;}
hasBeenClicked=true;$('.imagen_punto').css({display:'none'});$('#puntos li a').removeClass('active');$(".tabs-list .tab a").removeClass("active");$(this).addClass("active");$("#tab-content2-2").removeClass("active");$("#tab-content2-1").addClass("active");var actived_content=$(".tab-content.active").attr("id");if(actived_content!="tab-content"+content_target){$(".tab-content.active").removeClass("active");$("#tab-content"+content_target).addClass("active");}});$(document).on("click","#apartamentos .apartamento a.openinfo",function(){$('#apartamentos .apartamento a').removeClass('active');$(".info-piso").css("display","none");var divpopup=$(this).parent().find(".info-piso");if(divpopup.css("display")=="none"){divpopup.addClass("animated fadeIn");divpopup.css("display","block");$(this).addClass('active');}});$(document).on("click","#apartamentos .apartamento a.closeinfo",function(){$('#apartamentos .apartamento a.openinfo').removeClass('active');$(".info-piso").css("display","none");});$(document).on("click",".info-piso .enlaces .detalle",function(){var type_apartment=$(this).attr("type-apartment");switch(type_apartment){case"type-a":$("#tab-modelo1 a").trigger("click");break;case"type-b":$("#tab-modelo2 a").trigger("click");break;case"type-c":$("#tab-modelo3 a").trigger("click");break;}})
$(document).on("click",".volver-edificios a",function(){$("#tab-plan-maestro a").trigger("click");});var findMiddleElement=(function(docElm){var viewportHeight=docElm.clientHeight,elements=$('.field');return function(e){var middleElement;if(e&&e.type=='resize')
viewportHeight=docElm.clientHeight;elements.each(function(){var pos=this.getBoundingClientRect().top;if(pos>viewportHeight/2.5&&pos<viewportHeight/1.5){middleElement=this;return false;}});if(middleElement!='undefined'){if($(middleElement).hasClass("field-name-field-detalle-senderos")||$(middleElement).hasClass("field-name-field-detalle")||$(middleElement).hasClass("field-name-field-detalle-piscina")){$(middleElement).css("visibility","visible");$(middleElement).addClass("animated fadeInUp");}else if($(middleElement).hasClass("field-name-field-detalle-yoga")){$(middleElement).css("visibility","visible");$(middleElement).addClass("animated fadeInDown");}else if($(middleElement).hasClass("field-name-field-detalle-parque-mascotas")){$(middleElement).css("visibility","visible");$(middleElement).addClass("animated fadeInLeft");}else if($(middleElement).hasClass("field-name-field-imagen-lobby")){$(".field-name-field-detalle-lobby").css("visibility","visible");$(".field-name-field-detalle-lobby").addClass("animated fadeInLeft");}}}})(document.documentElement);$(window).on('scroll resize',findMiddleElement);});})(jQuery);;;
/* Source and licensing information for the above line(s) can be found at http://abitu.net/sites/all/themes/abitu/js/global.js. */
